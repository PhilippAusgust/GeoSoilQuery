% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/geosoilquery.R
\name{GeoSoilQuery}
\alias{GeoSoilQuery}
\title{GeoSoilQuery}
\description{
GeoSoilQuery

GeoSoilQuery
}
\details{
Eine R6-Klasse für schnelle räumliche Abfragen geologischer Parameter auf Basis
des IGME5000-Datensatzes. Das zugrundeliegende Shapefile wird einmal geladen und
anschließend für Punkt- oder Batch-Abfragen wiederverwendet.

Die Klasse kapselt das Laden, Transformieren und räumliche Joinen eines großen
Geologie-Shapefiles und stellt eine einfache API für Einzelpunkte und ganze
DataFrames bereit. Optional wird ein Cache verwendet, um wiederholte Abfragen
zu beschleunigen.
}
\section{Usage}{

\preformatted{
geo <- GeoSoilQuery$new(geology_path, crs_target = 4326, use_cache = TRUE)

geo$query_geology(lat, lon)
geo$query_batch(df, lat_col = "Lat", lon_col = "Lon", params = NULL)
geo$get_available_parameters()
geo$cache_info()
geo$clear_cache()
}
}

\section{Datenquelle}{

Die Beispiele verwenden den mitgelieferten Datensatz aus \code{inst/extdata/IGME5000}.
Der Zugriff erfolgt portabel über \code{system.file()}.
}

\examples{
library(GeoSoilQuery)

# ------------------------------------------------------------------
# Data source: mitgelieferte IGME5000-Daten aus inst/extdata
# ------------------------------------------------------------------

geology_path <- system.file(
  "extdata", "IGME5000", "europe", "data",
  "IGME5000_europeEPSG3034shp_geology_poly_v01.shp",
  package = "GeoSoilQuery"
)

# Nur ausführen, wenn die Datei wirklich vorhanden ist
if (nzchar(geology_path) && file.exists(geology_path)) {

  # --------------------------------------------------------------
  # Initialisierung der Query-Engine
  # --------------------------------------------------------------

  geo <- GeoSoilQuery$new(
    geology_path = geology_path,
    crs_target   = 4326,
    use_cache    = TRUE
  )

  # --------------------------------------------------------------
  # Einzelpunkt-Abfrage
  # --------------------------------------------------------------

  # Beispielkoordinaten: Köln
  lat <- 50.9375
  lon <- 6.9603

  res <- geo$query_geology(lat = lat, lon = lon)
  print(res)

  # --------------------------------------------------------------
  # Batch-Abfrage für mehrere Standorte
  # --------------------------------------------------------------

  df <- data.frame(
    Site = c("Koeln", "Berlin", "Muenchen"),
    Lat  = c(50.9375, 52.5200, 48.1372),
    Lon  = c(6.9603, 13.4050, 11.5756)
  )

  out <- geo$query_batch(df, lat_col = "Lat", lon_col = "Lon")
  print(out)

  # --------------------------------------------------------------
  # Cache-Informationen anzeigen und Cache leeren
  # --------------------------------------------------------------

  geo$cache_info()
  geo$clear_cache()
}
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{use_cache}}{Logisch; wenn TRUE werden Abfrage-Ergebnisse gecacht.}

\item{\code{crs}}{Integer; EPSG-Code des Koordinatensystems (Default: 4326).}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-GeoSoilQuery-new}{\code{GeoSoilQuery$new()}}
\item \href{#method-GeoSoilQuery-query_geology}{\code{GeoSoilQuery$query_geology()}}
\item \href{#method-GeoSoilQuery-query_batch}{\code{GeoSoilQuery$query_batch()}}
\item \href{#method-GeoSoilQuery-get_available_parameters}{\code{GeoSoilQuery$get_available_parameters()}}
\item \href{#method-GeoSoilQuery-clear_cache}{\code{GeoSoilQuery$clear_cache()}}
\item \href{#method-GeoSoilQuery-cache_info}{\code{GeoSoilQuery$cache_info()}}
\item \href{#method-GeoSoilQuery-clone}{\code{GeoSoilQuery$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-GeoSoilQuery-new"></a>}}
\if{latex}{\out{\hypertarget{method-GeoSoilQuery-new}{}}}
\subsection{Method \code{new()}}{
Initialisiere die GeoSoilQuery-Klasse.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{GeoSoilQuery$new(geology_path, crs_target = 4326, use_cache = TRUE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{geology_path}}{Pfad zum geologischen Shapefile.}

\item{\code{crs_target}}{Ziel-Koordinatensystem (default: 4326 für WGS84).}

\item{\code{use_cache}}{Soll ein Cache verwendet werden? (default: TRUE).}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Ein GeoSoilQuery-Objekt.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-GeoSoilQuery-query_geology"></a>}}
\if{latex}{\out{\hypertarget{method-GeoSoilQuery-query_geology}{}}}
\subsection{Method \code{query_geology()}}{
Abfrage geologischer Parameter für einen einzelnen Punkt.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{GeoSoilQuery$query_geology(lat, lon)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{lat}}{Latitude (WGS84).}

\item{\code{lon}}{Longitude (WGS84).}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Liste mit geologischen Attributen.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-GeoSoilQuery-query_batch"></a>}}
\if{latex}{\out{\hypertarget{method-GeoSoilQuery-query_batch}{}}}
\subsection{Method \code{query_batch()}}{
Batch-Abfrage für einen ganzen DataFrame.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{GeoSoilQuery$query_batch(
  df,
  lat_col = "Lat",
  lon_col = "Lon",
  params = c("AgeName", "Portr_AGE", "Portr_Petr", "AgeOldest", "AgeNewest")
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{df}}{DataFrame mit Lat/Lon Spalten.}

\item{\code{lat_col}}{Name der Latitude-Spalte.}

\item{\code{lon_col}}{Name der Longitude-Spalte.}

\item{\code{params}}{Vektor der gewünschten Parameter.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Erweiterter DataFrame mit geologischen Parametern.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-GeoSoilQuery-get_available_parameters"></a>}}
\if{latex}{\out{\hypertarget{method-GeoSoilQuery-get_available_parameters}{}}}
\subsection{Method \code{get_available_parameters()}}{
Zeige verfügbare Parameter im Shapefile.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{GeoSoilQuery$get_available_parameters()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
Character-Vektor mit Spaltennamen.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-GeoSoilQuery-clear_cache"></a>}}
\if{latex}{\out{\hypertarget{method-GeoSoilQuery-clear_cache}{}}}
\subsection{Method \code{clear_cache()}}{
Cache leeren.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{GeoSoilQuery$clear_cache()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-GeoSoilQuery-cache_info"></a>}}
\if{latex}{\out{\hypertarget{method-GeoSoilQuery-cache_info}{}}}
\subsection{Method \code{cache_info()}}{
Cache-Statistiken anzeigen.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{GeoSoilQuery$cache_info()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-GeoSoilQuery-clone"></a>}}
\if{latex}{\out{\hypertarget{method-GeoSoilQuery-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{GeoSoilQuery$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
